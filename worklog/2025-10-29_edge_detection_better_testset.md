# Edge Detection ë¹„êµ: ë” ë‚˜ì€ í…ŒìŠ¤íŠ¸ ì…‹

**ì‘ì„±ì¼**: 2025-10-29
**í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€**: w_0003, w_0007, w_0010 (w_0018 ì œì™¸)

---

## ì „ì²´ ë¹„êµí‘œ

### w_0003.tif (b=143.8, ê¸°ì¡´: 267ê°œ)
| ë°©ë²• | Contour ê°œìˆ˜ | Direct ëŒ€ë¹„ | ë¹„ê³  |
|------|-------------|------------|------|
| **ê¸°ì¡´ (size í•„í„° ì ìš©)** | **267** | - | â­ ì‹¤ì œ ê²°ê³¼ |
| Enhanced Gradient | 1,847 | -19% | âœ… ê°€ì¥ ì ìŒ |
| Sobel | 2,067 | -9% | - |
| Morphological Gradient | 2,138 | -6% | - |
| **Direct (mask ì§ì ‘)** | **2,273** | - | ê¸°ì¤€ |
| Canny | 3,692 | +62% | âš ï¸ ê³¼ê²€ì¶œ |

**íŒ¨í„´**: Enhanced Gradient < Sobel < Morph Gradient < Direct < Canny

---

### w_0007.tif (b=143.5, ê¸°ì¡´: 367ê°œ)
| ë°©ë²• | Contour ê°œìˆ˜ | Direct ëŒ€ë¹„ | ë¹„ê³  |
|------|-------------|------------|------|
| **ê¸°ì¡´ (size í•„í„° ì ìš©)** | **367** | - | â­ ì‹¤ì œ ê²°ê³¼ |
| Enhanced Gradient | 4,122 | -20% | âœ… ê°€ì¥ ì ìŒ |
| Sobel | 4,577 | -12% | - |
| Morphological Gradient | 4,740 | -9% | - |
| **Direct (mask ì§ì ‘)** | **5,182** | - | ê¸°ì¤€ |
| Canny | 7,613 | +47% | âš ï¸ ê³¼ê²€ì¶œ |

**íŒ¨í„´**: Enhanced Gradient < Sobel < Morph Gradient < Direct < Canny

---

### w_0010.tif (b=138.2, ê¸°ì¡´: 348ê°œ) âš ï¸
| ë°©ë²• | Contour ê°œìˆ˜ | Direct ëŒ€ë¹„ | ë¹„ê³  |
|------|-------------|------------|------|
| **ê¸°ì¡´ (size í•„í„° ì ìš©)** | **348** | - | â­ ì‹¤ì œ ê²°ê³¼ |
| **Direct (mask ì§ì ‘)** | **2,655** | - | âœ… ê¸°ì¤€ (ê°€ì¥ ì ìŒ!) |
| Enhanced Gradient | 2,916 | +10% | âš ï¸ Directë³´ë‹¤ ë§ìŒ |
| Sobel | 3,259 | +23% | - |
| Morphological Gradient | 3,428 | +29% | - |
| Canny | 5,967 | +125% | âš ï¸ ê³¼ê²€ì¶œ |

**ì£¼ëª©**: w_0010ì—ì„œëŠ” **Directê°€ ê°€ì¥ ì ìŒ!**

**íŒ¨í„´ ë³€í™”**: Direct < Enhanced Gradient < Sobel < Morph Gradient < Canny

---

## í•µì‹¬ ë°œê²¬

### 1. w_0010ì˜ íŠ¹ì´ íŒ¨í„´ âš ï¸

**ë‹¤ë¥¸ ì´ë¯¸ì§€ë“¤** (w_0003, w_0007):
```
Enhanced Gradient < Direct  (20% ê°ì†Œ)
```

**w_0010ë§Œ**:
```
Direct < Enhanced Gradient  (10% ì¦ê°€)
```

**ì›ì¸ ë¶„ì„**:
- w_0010ì˜ í‰ê·  b=138.2 (threshold 138ì— ë§¤ìš° ê·¼ì ‘!)
- Coverage 52.91% (ì ˆë°˜ ì´ìƒ ì†ìƒ)
- í° êµ¬ë©ë“¤ì´ ë§ìŒ (ìµœëŒ€ 73,984 px)

**ì¶”ë¡ **:
- Enhanced GradientëŠ” í° êµ¬ë©ì˜ ê²½ê³„ë¥¼ ì—¬ëŸ¬ ê°œë¡œ ë¶„í• í•  ìˆ˜ ìˆìŒ
- DirectëŠ” í° êµ¬ë©ì„ í•˜ë‚˜ì˜ contourë¡œ ìœ ì§€
- ì‹¬ê°í•œ ì†ìƒ ë¬¸ì„œì—ì„œëŠ” Directê°€ ë” íš¨ê³¼ì !

---

### 2. Enhanced Gradientì˜ íš¨ê³¼

**ì¼ë°˜ ë¬¸ì„œ** (w_0003, w_0007):
```
Direct â†’ Enhanced Gradient
2,273 â†’ 1,847 (19% ê°ì†Œ) âœ…
5,182 â†’ 4,122 (20% ê°ì†Œ) âœ…
```

**ì‹¬ê°í•œ ì†ìƒ** (w_0010):
```
Direct â†’ Enhanced Gradient
2,655 â†’ 2,916 (10% ì¦ê°€) âš ï¸
```

**ê²°ë¡ **:
- **ì¼ë°˜ ë¬¸ì„œ**: Enhanced Gradient íš¨ê³¼ì 
- **ì‹¬ê°í•œ ì†ìƒ**: Directê°€ ë” ë‚˜ìŒ

---

### 3. Size Filterì˜ ì—­í•  â­

ëª¨ë“  ì´ë¯¸ì§€ì—ì„œ Direct â†’ ì‹¤ì œ ê²°ê³¼ì˜ ì°¨ì´:

| ì´ë¯¸ì§€ | Direct | ì‹¤ì œ | ê°ì†Œìœ¨ | ë¹„ê³  |
|--------|--------|------|--------|------|
| w_0003 | 2,273 | 267 | **88%** | â­â­â­ |
| w_0007 | 5,182 | 367 | **93%** | â­â­â­ |
| w_0010 | 2,655 | 348 | **87%** | â­â­â­ |

**ë°œê²¬**: Size filterê°€ **87-93% ê°ì†Œ** íš¨ê³¼!

**í˜„ì¬ íŒŒì´í”„ë¼ì¸**:
```
Mask â†’ Morph CLOSE â†’ Morph OPEN â†’ Contours â†’ Size Filter (10~100k)
     â†’ ì‹¤ì œ ê²°ê³¼
```

**í•µì‹¬**: **Size filterê°€ ê°€ì¥ ì¤‘ìš”í•œ ì—­í• !**

---

## ì´ë¯¸ì§€ë³„ ìƒì„¸ ë¶„ì„

### w_0003.tif (ë³€ìƒ‰ëœ ë¬¸ì„œ)

**íŠ¹ì§•**:
- í‰ê·  b=143.8 (ë…¸ë€ìƒ‰ìœ¼ë¡œ ë³€ìƒ‰)
- Coverage 15.56% (ì ë‹¹)
- êµ¬ë© 267ê°œ

**Edge Detection ê²°ê³¼**:
```
Enhanced Gradient:  1,847  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Sobel:              2,067  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Morph Gradient:     2,138  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ
Direct:             2,273  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (ê¸°ì¤€)
Canny:              3,692  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

**ê²°ë¡ **: Enhanced Gradientê°€ 19% ê°ì†Œ íš¨ê³¼

---

### w_0007.tif (ë§ì€ ì‘ì€ êµ¬ë©)

**íŠ¹ì§•**:
- í‰ê·  b=143.5 (ì•½ê°„ ë³€ìƒ‰)
- Coverage 14.28%
- êµ¬ë© 367ê°œ
- ì´ ìœ¤ê³½ì„  853ê°œ â†’ 367ê°œ (486ê°œ ì œì™¸ë¨)

**Edge Detection ê²°ê³¼**:
```
Enhanced Gradient:  4,122  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Sobel:              4,577  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Morph Gradient:     4,740  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Direct:             5,182  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (ê¸°ì¤€)
Canny:              7,613  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

**ê²°ë¡ **: Enhanced Gradientê°€ 20% ê°ì†Œ íš¨ê³¼

**ì£¼ëª©**: ê°€ì¥ ë§ì€ ì‘ì€ ë…¸ì´ì¦ˆ (486ê°œ ì œì™¸)

---

### w_0010.tif (ì‹¬ê°í•œ ì†ìƒ) âš ï¸

**íŠ¹ì§•**:
- í‰ê·  b=138.2 (thresholdì— ë§¤ìš° ê·¼ì ‘!)
- Coverage 52.91% (ì ˆë°˜ ì´ìƒ ì†ìƒ!)
- êµ¬ë© 348ê°œ
- ìµœëŒ€ êµ¬ë© 73,984 px (ë§¤ìš° í¼)

**Edge Detection ê²°ê³¼**:
```
Direct:             2,655  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (ê¸°ì¤€, ê°€ì¥ ì ìŒ!)
Enhanced Gradient:  2,916  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ
Sobel:              3,259  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ
Morph Gradient:     3,428  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ
Canny:              5,967  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

**ê²°ë¡ **: Directê°€ ê°€ì¥ íš¨ê³¼ì !

**ì°¨ì´ì **:
- w_0003, w_0007: Enhanced < Direct
- w_0010: Direct < Enhanced

**ì´ìœ **:
- í° êµ¬ë©ë“¤ì´ ë§ìŒ
- Enhanced GradientëŠ” í° êµ¬ë©ì˜ ê²½ê³„ë¥¼ ì—¬ëŸ¬ ê°œë¡œ ë‚˜ëˆ”
- DirectëŠ” í° êµ¬ë©ì„ í•˜ë‚˜ë¡œ ìœ ì§€

---

## Edge Pixel ê°œìˆ˜ ë¹„êµ

### w_0003 (Coverage 15.56%)
```
Edge ì¢…ë¥˜          Edge Pixel ê°œìˆ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Canny              70,958 px
Morph Gradient    131,018 px
Sobel             178,436 px
```

### w_0007 (Coverage 14.28%)
```
Edge ì¢…ë¥˜          Edge Pixel ê°œìˆ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Canny             111,093 px
Morph Gradient    203,233 px
Sobel             274,916 px
```

### w_0010 (Coverage 52.91%)
```
Edge ì¢…ë¥˜          Edge Pixel ê°œìˆ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Canny             106,506 px
Morph Gradient    201,941 px
Sobel             272,296 px
```

**íŒ¨í„´**:
- Canny: ê°€ì¥ ì–‡ì€ edge (pixel ì ìŒ)
- Morph Gradient: ì¤‘ê°„
- Sobel: ê°€ì¥ ë‘êº¼ìš´ edge (pixel ë§ìŒ)

**í¥ë¯¸ë¡œìš´ ì **:
- w_0010 (Coverage 52.91%)ê³¼ w_0007 (Coverage 14.28%)ì˜ edge pixel ê°œìˆ˜ê°€ ë¹„ìŠ·
- Coverageë³´ë‹¤ëŠ” **contourì˜ ë³µì¡ë„**ê°€ edge pixel ê°œìˆ˜ ê²°ì •

---

## ê²°ê³¼ ë””ë ‰í† ë¦¬

```
edge_test_w0003/
â”œâ”€â”€ comparison_edges.png           # Edge ë¹„êµ
â”œâ”€â”€ comparison_contours.png        # Contour ë¹„êµ â­ í™•ì¸ í•„ìˆ˜
â””â”€â”€ ...

edge_test_w0007/
â”œâ”€â”€ comparison_edges.png
â”œâ”€â”€ comparison_contours.png        â­ í™•ì¸ í•„ìˆ˜
â””â”€â”€ ...

edge_test_w0010/
â”œâ”€â”€ comparison_edges.png
â”œâ”€â”€ comparison_contours.png        â­ í™•ì¸ í•„ìˆ˜
â””â”€â”€ ...
```

---

## ê¶Œì¥ ì‚¬í•­

### âœ… ì¼ë°˜ ë¬¸ì„œ (bí‰ê·  > 140)

**í˜„ì¬ ë°©ë²• ìœ ì§€ ê¶Œì¥**:
```python
# Mask â†’ Morph CLOSE â†’ Morph OPEN â†’ Contours â†’ Size Filter
kernel = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (3, 3))
mask_clean = cv2.morphologyEx(mask, cv2.MORPH_CLOSE, kernel)
mask_clean = cv2.morphologyEx(mask_clean, cv2.MORPH_OPEN, kernel)
contours, _ = cv2.findContours(mask_clean, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
# + Size Filter (min=10, max=200000)
```

**ì´ìœ **:
- Size filterê°€ 87-93% ê°ì†Œ íš¨ê³¼ (ê°€ì¥ ì¤‘ìš”!)
- ì•ˆì •ì ì´ê³  ì˜ˆì¸¡ ê°€ëŠ¥
- Enhanced GradientëŠ” ì•½ 20% ê°ì†Œì§€ë§Œ, size filter ì ìš© í›„ ì°¨ì´ ë¶ˆëª…í™•

**ì ìš© ëŒ€ìƒ**: w_0003, w_0007, w_0001, w_0005, w_0015 ë“±

---

### âš ï¸ ì‹¬ê°í•œ ì†ìƒ (bí‰ê·  â‰ˆ 138)

**Direct ë°©ë²• ìœ ì§€**:
```python
# Enhanced GradientëŠ” í° êµ¬ë©ì„ ì—¬ëŸ¬ ê°œë¡œ ë¶„í• í•  ìˆ˜ ìˆìŒ
# Directê°€ ë” íš¨ê³¼ì 
```

**ì´ìœ **:
- w_0010: Direct 2,655 < Enhanced 2,916
- í° êµ¬ë© ìœ ì§€ì— ìœ ë¦¬

**ì ìš© ëŒ€ìƒ**: w_0010 (b=138.2, Coverage 52.91%)

---

### âŒ Canny ë¹„ì¶”ì²œ

ëª¨ë“  ì´ë¯¸ì§€ì—ì„œ ê³¼ê²€ì¶œ:
- w_0003: +62% (3,692 vs 2,273)
- w_0007: +47% (7,613 vs 5,182)
- w_0010: +125% (5,967 vs 2,655)

---

## ë‹¤ìŒ ë‹¨ê³„

### 1. ìœ¡ì•ˆ í™•ì¸ í•„ìˆ˜ â­

**í™•ì¸í•  ì´ë¯¸ì§€**:
```
edge_test_w0003/comparison_contours.png
edge_test_w0007/comparison_contours.png
edge_test_w0010/comparison_contours.png
```

**í™•ì¸ ì‚¬í•­**:
- ê° ë°©ë²•ì´ ì°¾ì€ contourì˜ í’ˆì§ˆ
- ì‹¤ì œ êµ¬ë©ê³¼ ë…¸ì´ì¦ˆ êµ¬ë¶„
- í° êµ¬ë© ì²˜ë¦¬ ë°©ì‹

---

### 2. Enhanced Gradient ì‹¤ì œ ì ìš© (ì˜µì…˜)

**ë°©ë²•**: Size filter í¬í•¨í•˜ì—¬ í…ŒìŠ¤íŠ¸

```python
# Enhanced Gradient + Size Filter
gradient = cv2.morphologyEx(mask, cv2.MORPH_GRADIENT, kernel)
gradient_thick = cv2.dilate(gradient, kernel, iterations=1)
contours, _ = cv2.findContours(gradient_thick, cv2.RETR_EXTERNAL, ...)

# Size filter ì ìš©
for cnt in contours:
    area = cv2.contourArea(cnt)
    if area < 10 or area > 200000:
        continue
    # ìœ íš¨í•œ êµ¬ë©
```

**ê¸°ëŒ€ ê²°ê³¼**:
- w_0003: 1,847 â†’ ??? (size filter í›„)
- w_0007: 4,122 â†’ ??? (size filter í›„)
- w_0010: 2,916 â†’ ??? (size filter í›„)

**í™•ì¸ í•„ìš”**: size filter ì ìš© í›„ ì‹¤ì œ êµ¬ë© ê°œìˆ˜

---

### 3. w_0010 íŠ¹ë³„ ì²˜ë¦¬

**ì˜µì…˜ A**: b threshold ë‚®ì¶”ê¸°
```bash
--s-threshold 135  # 138 â†’ 135
```

**ì˜µì…˜ B**: í˜„ì¬ ë°©ë²• ìœ ì§€
- Directê°€ ì´ë¯¸ íš¨ê³¼ì 
- Size filterë¡œ 2,655 â†’ 348ê°œ

---

## ìš”ì•½

### í•µì‹¬ ë°œê²¬
1. **Size filterê°€ ê°€ì¥ ì¤‘ìš”** (87-93% ê°ì†Œ!)
2. **Enhanced Gradient**: ì¼ë°˜ ë¬¸ì„œì—ì„œ 20% ê°ì†Œ
3. **w_0010 íŠ¹ì´ ì¼€ì´ìŠ¤**: Directê°€ ë” íš¨ê³¼ì 
4. **Canny ë¹„ì¶”ì²œ**: ëª¨ë“  ê²½ìš° ê³¼ê²€ì¶œ

### ê¶Œì¥
- **ì¼ë°˜ ë¬¸ì„œ** (w_0003, w_0007): í˜„ì¬ ë°©ë²• ìœ ì§€ âœ…
- **ì‹¬ê°í•œ ì†ìƒ** (w_0010): Direct ìœ ì§€ âœ…
- **Enhanced Gradient**: ì˜µì…˜ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ ğŸ’¡
- **Canny**: ì‚¬ìš© ì•ˆ í•¨ âŒ

### ê²°ê³¼ í™•ì¸ í•„ìˆ˜
```
edge_test_w0003/comparison_contours.png
edge_test_w0007/comparison_contours.png
edge_test_w0010/comparison_contours.png
```

ì´ 3ê°œ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•˜ê³  ì–´ë–¤ ë°©ë²•ì´ ì‹¤ì œë¡œ êµ¬ë©ì„ ë” ì˜ ì°¾ëŠ”ì§€ íŒë‹¨í•˜ì„¸ìš”!
