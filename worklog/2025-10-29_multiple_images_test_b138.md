# ë‹¤ì¤‘ ì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸: b=138

**ì‘ì„±ì¼**: 2025-10-29
**íŒŒë¼ë¯¸í„°**: `--method lab_b --s-threshold 138 --min-area 10`

---

## ì „ì²´ ê²°ê³¼ ë¹„êµí‘œ

| ì´ë¯¸ì§€ | í¬ê¸° | í‰ê·  bê°’ | Coverage | êµ¬ë© ê°œìˆ˜ | ìµœëŒ€ êµ¬ë© | ì´ ì†ìƒ ë©´ì  | í‰ê°€ |
|--------|------|---------|----------|----------|----------|-------------|------|
| **test_small.jpg** | 1443x1082 | 141.7Â±7.6 | 32.40% | 254 | 2,477 px | 23,764 px (1.52%) | âœ… ì ë‹¹ |
| **w_0001.tif** | 7216x5412 | 141.6Â±7.9 | 32.70% | 335 | **71,158 px** | 753,494 px (1.93%) | âœ… ì ë‹¹ |
| **w_0003.tif** | 7216x5412 | 143.8Â±6.6 | 15.56% | 267 | 49,840 px | 411,886 px (1.05%) | âœ… ì ë‹¹ |
| **w_0005.tif** | 7216x5412 | 144.1Â±6.7 | 15.89% | 239 | 17,676 px | 252,193 px (0.65%) | âœ… ì ë‹¹ |
| **w_0007.tif** | 7216x5412 | 143.5Â±6.0 | 14.28% | 367 | 61,350 px | 429,198 px (1.10%) | âœ… ì ë‹¹ |
| **w_0010.tif** | 7216x5412 | 138.2Â±8.0 | 52.91% | 348 | **73,984 px** | 431,252 px (1.10%) | âš ï¸ ë§ìŒ |
| **w_0015.tif** | 7216x5412 | 144.9Â±5.7 | 11.36% | 163 | 49,955 px | 211,946 px (0.54%) | âœ… ì ë‹¹ |
| **w_0018.tif** | 5412x7216 | 137.8Â±8.5 | 51.93% | **2,626** | 4,872 px | 140,263 px (0.36%) | âš ï¸ ë§¤ìš° ë§ìŒ |

---

## í•µì‹¬ ë°œê²¬

### 1. max-area ì¦ê°€ í•„ìš”ì„± í™•ì¸

**ë¬¸ì œ**: ê¸°ë³¸ max-area=100,000 pixelsë¡œëŠ” í° êµ¬ë©ì„ ë†“ì¹  ìˆ˜ ìˆìŒ

**ì¦ê±°**:
- w_0001: ìµœëŒ€ êµ¬ë© **71,158 px**
- w_0010: ìµœëŒ€ êµ¬ë© **73,984 px**

**í•´ê²°**: max-areaë¥¼ **200,000** ì´ìƒìœ¼ë¡œ ì„¤ì • ê¶Œì¥

```bash
--max-area 200000
```

---

### 2. ì´ë¯¸ì§€ë³„ íŠ¹ì„± ë¶„ë¥˜

#### ê·¸ë£¹ A: ê¹¨ë—í•œ ë°°ê²½ (bí‰ê·  â‰ˆ 141-142)
- **test_small.jpg**: b=141.7, Coverage 32.40%
- **w_0001.tif**: b=141.6, Coverage 32.70%

**íŠ¹ì§•**:
- Coverage ë†’ìŒ (32%ëŒ€)
- êµ¬ë© ê°œìˆ˜ ì ë‹¹ (254-335ê°œ)
- í° êµ¬ë© ì¡´ì¬ (w_0001: 71k pixels)

---

#### ê·¸ë£¹ B: ì•½ê°„ ë³€ìƒ‰ëœ ë°°ê²½ (bí‰ê·  â‰ˆ 143-145)
- **w_0003.tif**: b=143.8, Coverage 15.56%
- **w_0005.tif**: b=144.1, Coverage 15.89%
- **w_0007.tif**: b=143.5, Coverage 14.28%
- **w_0015.tif**: b=144.9, Coverage 11.36%

**íŠ¹ì§•**:
- Coverage ë‚®ìŒ (11-16%)
- êµ¬ë© ê°œìˆ˜ ì ë‹¹ (163-367ê°œ)
- ë°°ê²½ì´ ë…¸ë€ìƒ‰ìœ¼ë¡œ ë³€ìƒ‰ë¨

---

#### ê·¸ë£¹ C: ì‹¬ê°í•œ ì†ìƒ (bí‰ê·  â‰ˆ 137-138, thresholdì— ê·¼ì ‘)
- **w_0010.tif**: b=138.2, Coverage 52.91%
- **w_0018.tif**: b=137.8, Coverage 51.93%

**íŠ¹ì§•**:
- Coverage ë§¤ìš° ë†’ìŒ (50%ëŒ€!)
- w_0010: í° êµ¬ë©ë“¤ (í‰ê·  1,239 px)
- w_0018: ì‘ì§€ë§Œ ë§¤ìš° ë§ì€ êµ¬ë©ë“¤ (2,626ê°œ!)

**ì£¼ì˜**:
- í‰ê·  bê°’ì´ threshold(138)ì— ë§¤ìš° ê·¼ì ‘
- ì „ì²´ ì´ë¯¸ì§€ì˜ ì ˆë°˜ ì´ìƒì´ ì†ìƒ
- b=138ë¡œëŠ” ê³¼ê²€ì¶œ ê°€ëŠ¥ì„±

---

## ìƒì„¸ ë¶„ì„

### test_small.jpg (ê¸°ì¤€ ì´ë¯¸ì§€)
```
í¬ê¸°: 1443 x 1082 (1.56 MP)
í‰ê·  b: 141.7 Â± 7.6
Coverage: 32.40%
êµ¬ë©: 254ê°œ
ë©´ì  ë²”ìœ„: 10 - 2,477 px
í‰ê·  ë©´ì : 93.6 px
ì¤‘ê°„ê°’ ë©´ì : 50.2 px
ì´ ì†ìƒ: 23,764 px (1.52%)
```

**í‰ê°€**:
- âœ… ê¹¨ë—í•œ ë°°ê²½
- âœ… ì ë‹¹í•œ êµ¬ë© ê°œìˆ˜
- âœ… b=138 ìµœì 

---

### w_0001.tif (í° êµ¬ë©)
```
í¬ê¸°: 7216 x 5412 (39.06 MP)
í‰ê·  b: 141.6 Â± 7.9
Coverage: 32.70%
êµ¬ë©: 335ê°œ
ë©´ì  ë²”ìœ„: 10 - 71,158 px âš ï¸
í‰ê·  ë©´ì : 2,249.2 px
ì¤‘ê°„ê°’ ë©´ì : 1,395.5 px
ì´ ì†ìƒ: 753,494 px (1.93%)
```

**í‰ê°€**:
- âœ… test_smallê³¼ ë¹„ìŠ·í•œ bê°’ ë¶„í¬
- âš ï¸ **ë§¤ìš° í° êµ¬ë© ì¡´ì¬** (71k pixels)
- ğŸ’¡ max-area=200k í•„ìš”

---

### w_0003.tif (ë³€ìƒ‰)
```
í¬ê¸°: 7216 x 5412 (39.06 MP)
í‰ê·  b: 143.8 Â± 6.6
Coverage: 15.56%
êµ¬ë©: 267ê°œ
ë©´ì  ë²”ìœ„: 10 - 49,840 px
í‰ê·  ë©´ì : 1,542.6 px
ì¤‘ê°„ê°’ ë©´ì : 776.5 px
ì´ ì†ìƒ: 411,886 px (1.05%)
```

**í‰ê°€**:
- âœ… ë°°ê²½ì´ ë…¸ë€ìƒ‰ìœ¼ë¡œ ë³€ìƒ‰
- âœ… b=138ë¡œ ì •í™•íˆ êµ¬ë¶„ ê°€ëŠ¥
- âœ… Coverage ë‚®ìŒ (ì§„ì§œ êµ¬ë©ë§Œ)

---

### w_0005.tif (ë³€ìƒ‰, ê¸°ì¤€ ë¹„êµìš©)
```
í¬ê¸°: 7216 x 5412 (39.06 MP)
í‰ê·  b: 144.1 Â± 6.7
Coverage: 15.89%
êµ¬ë©: 239ê°œ
ë©´ì  ë²”ìœ„: 10 - 17,676 px
í‰ê·  ë©´ì : 1,055.2 px
ì¤‘ê°„ê°’ ë©´ì : 227.5 px
ì´ ì†ìƒ: 252,193 px (0.65%)
```

**í‰ê°€**:
- âœ… ê°€ì¥ ë³€ìƒ‰ëœ ë¬¸ì„œ ì¤‘ í•˜ë‚˜
- âœ… b=138ë¡œ ì•ˆì •ì  ê²€ì¶œ
- âœ… ì ë‹¹í•œ êµ¬ë© ê°œìˆ˜

---

### w_0007.tif (ë§ì€ ìœ¤ê³½ì„ )
```
í¬ê¸°: 7216 x 5412 (39.06 MP)
í‰ê·  b: 143.5 Â± 6.0
Coverage: 14.28%
êµ¬ë©: 367ê°œ
ë©´ì  ë²”ìœ„: 10 - 61,350 px
í‰ê·  ë©´ì : 1,169.5 px
ì¤‘ê°„ê°’ ë©´ì : 58.0 px
ì´ ì†ìƒ: 429,198 px (1.10%)

ì´ ìœ¤ê³½ì„ : 853ê°œ
ì œì™¸ë¨: 486ê°œ
```

**í‰ê°€**:
- âœ… ë§ì€ ì‘ì€ ë…¸ì´ì¦ˆ (486ê°œ ì œì™¸ë¨)
- âœ… min-area=10ìœ¼ë¡œ í•„í„°ë§ íš¨ê³¼ì 
- âš ï¸ í° êµ¬ë© ì¡´ì¬ (61k pixels)

---

### w_0010.tif (ì‹¬ê°í•œ ì†ìƒ)
```
í¬ê¸°: 7216 x 5412 (39.06 MP)
í‰ê·  b: 138.2 Â± 8.0 âš ï¸
Coverage: 52.91% âš ï¸
êµ¬ë©: 348ê°œ
ë©´ì  ë²”ìœ„: 10 - 73,984 px âš ï¸
í‰ê·  ë©´ì : 1,239.2 px
ì¤‘ê°„ê°’ ë©´ì : 57.8 px
ì´ ì†ìƒ: 431,252 px (1.10%)
```

**í‰ê°€**:
- âš ï¸ í‰ê·  b=138.2 (thresholdì— ë§¤ìš° ê·¼ì ‘!)
- âš ï¸ Coverage 52.91% (ì ˆë°˜ ì´ìƒ ì†ìƒ)
- âš ï¸ ë§¤ìš° í° êµ¬ë© (73k pixels)
- ğŸ’¡ ì´ ë¬¸ì„œëŠ” b=138ë¡œ ê³¼ê²€ì¶œ ê°€ëŠ¥

**ì œì•ˆ**: w_0010ì€ thresholdë¥¼ ë‚®ì¶°ë³¼ í•„ìš” (b=135 ë“±)

---

### w_0015.tif (ê°€ì¥ ë³€ìƒ‰)
```
í¬ê¸°: 7216 x 5412 (39.06 MP)
í‰ê·  b: 144.9 Â± 5.7 (ê°€ì¥ ë†’ìŒ)
Coverage: 11.36% (ê°€ì¥ ë‚®ìŒ)
êµ¬ë©: 163ê°œ (ê°€ì¥ ì ìŒ)
ë©´ì  ë²”ìœ„: 10 - 49,955 px
í‰ê·  ë©´ì : 1,300.3 px
ì¤‘ê°„ê°’ ë©´ì : 766.0 px
ì´ ì†ìƒ: 211,946 px (0.54%)
```

**í‰ê°€**:
- âœ… ê°€ì¥ ë…¸ë€ìƒ‰ìœ¼ë¡œ ë³€ìƒ‰ëœ ë¬¸ì„œ
- âœ… b=138ë¡œ ì •í™•íˆ êµ¬ë©ë§Œ ê²€ì¶œ
- âœ… ê³¼ê²€ì¶œ ì—†ìŒ

---

### w_0018.tif (ë§¤ìš° ì‹¬ê°í•œ ì†ìƒ)
```
í¬ê¸°: 5412 x 7216 (39.06 MP, íšŒì „ë¨)
í‰ê·  b: 137.8 Â± 8.5 âš ï¸
Coverage: 51.93% âš ï¸
êµ¬ë©: 2,626ê°œ âš ï¸âš ï¸âš ï¸
ë©´ì  ë²”ìœ„: 10 - 4,872 px
í‰ê·  ë©´ì : 53.4 px (ì‘ìŒ)
ì¤‘ê°„ê°’ ë©´ì : 23.5 px (ë§¤ìš° ì‘ìŒ)
ì´ ì†ìƒ: 140,263 px (0.36%)

ì´ ìœ¤ê³½ì„ : 5,950ê°œ
ì œì™¸ë¨: 3,324ê°œ
```

**í‰ê°€**:
- âŒ í‰ê·  b=137.8 (thresholdë³´ë‹¤ ë‚®ìŒ!)
- âŒ Coverage 51.93% (ì ˆë°˜ ì´ìƒ)
- âŒ 2,626ê°œ êµ¬ë© (ë„ˆë¬´ ë§ìŒ)
- âŒ ì‘ì€ êµ¬ë©ë“¤ì´ ë§¤ìš° ë§ìŒ

**ë¬¸ì œ**:
- ì „ì²´ ì´ë¯¸ì§€ê°€ ì‹¬ê°í•˜ê²Œ ì†ìƒë¨
- í‰ê·  bê°’ì´ thresholdë³´ë‹¤ ë‚®ìŒ
- b=138ë¡œëŠ” ë¶€ì í•©

**ì œì•ˆ**: w_0018ì€ ë‹¤ë¥¸ ë°©ë²• í•„ìš” (edge detection ë“±)

---

## bê°’ê³¼ Coverageì˜ ê´€ê³„

```
í‰ê·  bê°’    Coverage    í‰ê°€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
137.8 (w_0018)  51.93%   âš ï¸ thresholdë³´ë‹¤ ë‚®ìŒ
138.2 (w_0010)  52.91%   âš ï¸ thresholdì— ë§¤ìš° ê·¼ì ‘
141.6 (w_0001)  32.70%   âœ… ì ë‹¹
141.7 (test)    32.40%   âœ… ì ë‹¹
143.5 (w_0007)  14.28%   âœ… ì ë‹¹
143.8 (w_0003)  15.56%   âœ… ì ë‹¹
144.1 (w_0005)  15.89%   âœ… ì ë‹¹
144.9 (w_0015)  11.36%   âœ… ì ë‹¹
```

**íŒ¨í„´**:
- bí‰ê·  < 138: ê³¼ê²€ì¶œ (ì „ì²´ê°€ ì†ìƒëœ ë¬¸ì„œ)
- bí‰ê·  â‰ˆ 138-142: Coverage ë†’ìŒ (32%ëŒ€)
- bí‰ê·  â‰ˆ 143-145: Coverage ë‚®ìŒ (11-16%)

**ê²°ë¡ **: b=138ì€ bí‰ê· ì´ **140 ì´ìƒ**ì¸ ë¬¸ì„œì— ìµœì 

---

## ìµœëŒ€ êµ¬ë© í¬ê¸° ë¶„í¬

| ì´ë¯¸ì§€ | ìµœëŒ€ êµ¬ë© | íŒì • |
|--------|----------|------|
| test_small | 2,477 px | âœ… |
| w_0005 | 17,676 px | âœ… |
| w_0018 | 4,872 px | âœ… |
| w_0003 | 49,840 px | âœ… |
| w_0015 | 49,955 px | âœ… |
| w_0007 | 61,350 px | âœ… |
| **w_0001** | **71,158 px** | âš ï¸ max-area=100k ì´ˆê³¼ |
| **w_0010** | **73,984 px** | âš ï¸ max-area=100k ì´ˆê³¼ |

**ê²°ë¡ **: **max-area=200000** í•„ìš”!

---

## ê¶Œì¥ ì„¤ì •

### ì¼ë°˜ ë¬¸ì„œ (bí‰ê·  > 140)
```bash
python extract_whiteness_based.py \
  --method lab_b \
  --s-threshold 138 \
  --min-area 10 \
  --max-area 200000
```

**ì ìš© ëŒ€ìƒ**:
- test_small.jpg (b=141.7) âœ…
- w_0001.tif (b=141.6) âœ…
- w_0003.tif (b=143.8) âœ…
- w_0005.tif (b=144.1) âœ…
- w_0007.tif (b=143.5) âœ…
- w_0015.tif (b=144.9) âœ…

---

### ì‹¬ê°í•œ ì†ìƒ ë¬¸ì„œ (bí‰ê·  â‰ˆ 138)
```bash
python extract_whiteness_based.py \
  --method lab_b \
  --s-threshold 135 \  # ë” ë‚®ì¶¤
  --min-area 10 \
  --max-area 200000
```

**ì ìš© ëŒ€ìƒ**:
- w_0010.tif (b=138.2) âš ï¸
- w_0018.tif (b=137.8) âš ï¸

---

## ë°°ì¹˜ ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸

### ëª¨ë“  ì´ë¯¸ì§€ ì¼ê´„ ì²˜ë¦¬
```bash
# 1ì²© ì „ì²´ ì²˜ë¦¬ (b=138)
for img in datasets/1ì²©/*.tif; do
    name=$(basename "$img" .tif)
    python extract_whiteness_based.py \
      --input "$img" \
      --output-dir "results/${name}_b138" \
      --method lab_b \
      --s-threshold 138 \
      --min-area 10 \
      --max-area 200000
done
```

### bê°’ í™•ì¸ í›„ ì¡°ê±´ë¶€ ì²˜ë¦¬
```bash
# ë¨¼ì € bê°’ í™•ì¸
python -c "
import cv2
import numpy as np
import glob

for img_path in glob.glob('datasets/1ì²©/*.tif'):
    img = cv2.imread(img_path)
    lab = cv2.cvtColor(img, cv2.COLOR_BGR2LAB)
    b = lab[:,:,2]
    avg_b = np.mean(b)
    print(f'{img_path}: b={avg_b:.1f}')
"

# ì¡°ê±´ë¶€ ì‹¤í–‰ (bash)
for img in datasets/1ì²©/*.tif; do
    name=$(basename "$img" .tif)
    # bê°’ì— ë”°ë¼ ë‹¤ë¥¸ threshold ì‚¬ìš©
    # (ìˆ˜ë™ìœ¼ë¡œ êµ¬ë¶„ í•„ìš”)
    python extract_whiteness_based.py \
      --input "$img" \
      --output-dir "results/${name}_b138" \
      --method lab_b \
      --s-threshold 138 \
      --min-area 10 \
      --max-area 200000
done
```

---

## ê²°ê³¼ ë””ë ‰í† ë¦¬

### ìƒì„±ëœ ê²°ê³¼
```
results/
â”œâ”€â”€ test_small_b138/              # 254ê°œ
â”œâ”€â”€ test_small_b138_maxarea200k/  # 254ê°œ (ë™ì¼)
â”œâ”€â”€ w_0001_b138/                  # 335ê°œ
â”œâ”€â”€ w_0003_b138/                  # 267ê°œ
â”œâ”€â”€ w_0005_b138/                  # 239ê°œ
â”œâ”€â”€ w_0005_b138_maxarea200k/      # 239ê°œ (ë™ì¼)
â”œâ”€â”€ w_0007_b138/                  # 367ê°œ
â”œâ”€â”€ w_0010_b138/                  # 348ê°œ
â”œâ”€â”€ w_0015_b138/                  # 163ê°œ
â””â”€â”€ w_0018_b138/                  # 2,626ê°œ
```

---

## ìµœì¢… ê¶Œì¥ ì‚¬í•­

### 1. max-area ì¦ê°€
```bash
--max-area 200000  # ê¸°ë³¸ê°’ 100000ì—ì„œ ì¦ê°€
```

**ì´ìœ **: w_0001(71k), w_0010(73k) ê°™ì€ í° êµ¬ë© í¬í•¨

---

### 2. ì´ë¯¸ì§€ë³„ threshold ì¡°ì •

#### ëŒ€ë¶€ë¶„ ë¬¸ì„œ (bâ‰¥140)
```bash
--s-threshold 138
```

#### ì‹¬ê°í•œ ì†ìƒ (b<140)
```bash
--s-threshold 135  # ë˜ëŠ” ë” ë‚®ê²Œ
```

---

### 3. í’ˆì§ˆ í™•ì¸

ê° ê²°ê³¼ì˜ `comparison.png`ë¥¼ ìœ¡ì•ˆìœ¼ë¡œ í™•ì¸:
- ê³¼ê²€ì¶œ: thresholdë¥¼ ë‚®ì¶¤ (138 â†’ 135)
- ê³¼ì†Œê²€ì¶œ: thresholdë¥¼ ë†’ì„ (138 â†’ 140)

---

## ë‹¤ìŒ ë‹¨ê³„

1. **ë‚˜ë¨¸ì§€ ì´ë¯¸ì§€ ì²˜ë¦¬**:
   - w_0002, w_0004, w_0006, w_0008, w_0009 ë“±

2. **ë‹¤ë¥¸ ì²© ì²˜ë¦¬**:
   - datasets/2ì²©/, 3ì²©/, ... ì²˜ë¦¬

3. **ìë™ threshold ì„ íƒ**:
   - bí‰ê· ê°’ì— ë”°ë¼ ìë™ìœ¼ë¡œ threshold ì¡°ì •í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

4. **w_0018 ê°™ì€ ì‹¬ê°í•œ ì†ìƒ ë¬¸ì„œ**:
   - Edge detection ë°©ë²• ì‹œë„
   - ë‹¤ë¥¸ ìƒ‰ê³µê°„ ì‹œë„ (HSV, YCrCb ë“±)

---

## ìš”ì•½

### âœ… ì„±ê³µ
- b=138ì´ ëŒ€ë¶€ë¶„ ë¬¸ì„œì— íš¨ê³¼ì 
- max-area=200000 í•„ìš”ì„± í™•ì¸
- 8ê°œ ì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### âš ï¸ ì£¼ì˜
- w_0010: bí‰ê·  138.2 (thresholdì— ê·¼ì ‘)
- w_0018: bí‰ê·  137.8 (ì‹¬ê°í•œ ì†ìƒ)

### ğŸ“ ê¶Œì¥
```bash
python extract_whiteness_based.py \
  --method lab_b \
  --s-threshold 138 \
  --min-area 10 \
  --max-area 200000
```
